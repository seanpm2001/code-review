<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Tidyteam code review principles - Issues</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../author/handling-comments.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Issues</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Tidyteam code review principles</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/tidyverse/code-review" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../collaboration/index.html" class="sidebar-item-text sidebar-link">Patterns of collaboration</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Reviewing</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/purpose.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">The purpose of code review</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/aspects.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Aspects of a PR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/navigate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Navigating a PR in review</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/speed.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Speed of reviews</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/comments.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Writing review comments</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/pushback.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Handling pushback</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Authoring</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../author/submitting.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Submitting a PR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../author/focused.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Focused PRs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../author/handling-comments.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Handling reviewer comments</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../issues/index.html" class="sidebar-item-text sidebar-link active">Issues</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-how-to-write-an-issue" id="toc-sec-how-to-write-an-issue" class="nav-link active" data-scroll-target="#sec-how-to-write-an-issue">How to write an issue</a>
  <ul class="collapse">
  <li><a href="#sec-issue-context" id="toc-sec-issue-context" class="nav-link" data-scroll-target="#sec-issue-context">Context</a></li>
  <li><a href="#sec-issue-reprex" id="toc-sec-issue-reprex" class="nav-link" data-scroll-target="#sec-issue-reprex">Reprex</a></li>
  </ul></li>
  <li><a href="#new-issues-vs-closed-issues" id="toc-new-issues-vs-closed-issues" class="nav-link" data-scroll-target="#new-issues-vs-closed-issues">New issues vs closed issues</a></li>
  <li><a href="#sec-issue-first-pr-second" id="toc-sec-issue-first-pr-second" class="nav-link" data-scroll-target="#sec-issue-first-pr-second">Issue first, PR second</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/tidyverse/code-review/edit/main/issues/index.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/tidyverse/code-review/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-issues" class="quarto-section-identifier d-none d-lg-block">Issues</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="sec-how-to-write-an-issue" class="level2">
<h2 class="anchored" data-anchor-id="sec-how-to-write-an-issue">How to write an issue</h2>
<p>GitHub issues are often the first step in the PR process, since many of our PRs are reactions to bug reports and feature requests we receive. Because of this, it is worth spending a little time discussing what makes a high-quality issue.</p>
<p>While it might seem like opening an issue with just the error message you received is “good enough” for the package maintainer to figure it out, this typically isn’t the case in practice. Maintainers generally need enough context to reproduce the <em>exact</em> issue themselves before working on a solution. Crafting a great issue is a critical part of helping <em>me</em> (the maintainer) help <em>you</em> (the issue opener).</p>
<p>Great issues are composed of two parts:</p>
<ul>
<li><p>Context around what you are trying to accomplish.</p></li>
<li><p>A minimal reproducible example of the problem.</p></li>
</ul>
<section id="sec-issue-context" class="level3">
<h3 class="anchored" data-anchor-id="sec-issue-context">Context</h3>
<p>Issues come in all shapes and sizes, and package maintainers have to work through many of them in a single day, so providing context around exactly what was expected to happen vs what actually happened is extremely helpful. Useful context takes the form of a complete paragraph including:</p>
<ul>
<li><p>The overarching type of problem you are experiencing - such as a bug, performance regression, or a missing feature.</p></li>
<li><p>The specific functions involved.</p></li>
<li><p>Any relevant package versions.</p></li>
<li><p>Links to any relevant issues or pull requests.</p></li>
</ul>
<p>This <a href="https://github.com/tidyverse/dplyr/issues/6674">dplyr issue</a> is a great example of providing useful context:</p>
<blockquote class="blockquote">
<p>Using <code>case_when</code> in a <code>mutate</code> call with a grouping variable is much, much slower in v1.1.0 compared to v1.0.10. The code works but it’s causing a tremendous slowdown in many of the packages I maintain.</p>
</blockquote>
<p>The issue author goes on to provide a full before and after benchmark <a href="#sec-issue-reprex">reprex</a> (which is excellent!), but the context was actually so comprehensive that we could have reproduced this ourselves without it.</p>
</section>
<section id="sec-issue-reprex" class="level3">
<h3 class="anchored" data-anchor-id="sec-issue-reprex">Reprex</h3>
<p>A <strong>repr</strong>oducible <strong>ex</strong>ample, or reprex, is the most important part of a high-quality issue. To create a reprex, you’ll use the <a href="https://reprex.tidyverse.org/">reprex</a> package. To learn how to use the package, <a href="https://reprex.tidyverse.org/articles/learn-reprex.html">read this article</a>. If you have the time, you should also watch Jenny Bryan’s webinar (linked from that article) that discusses how to use the package.</p>
<p>Without a reprex, it is typically extremely difficult for maintainers to reproduce an issue, which significantly decreases the chance of it getting resolved in a favorable way.</p>
<p>As you get into the habit of creating reprexes for your issues, you’ll find that the process of creating the reprex often leads you to solve the problem on your own. Because reprex forces you to run your example in a new R session, effectively giving you a “fresh start,” you’ll commonly discover that you had something “weird” in your main R session that was causing the problem to begin with.</p>
<p>Once you’ve gotten comfortable with creating reprexes, you should next work on making them <em>minimal</em>. Creating a minimal reprex is a bit of an artform, and involves stripping down an existing reprex to the minimum amount of packages and code needed to reproduce the issue. Sometimes this requires going a level deeper into the code to figure out where the underlying problem is coming from. For example, with the dplyr issue mentioned in the <a href="#sec-issue-context">context</a> section, <a href="https://github.com/tidyverse/dplyr/issues/6674#issuecomment-1412175315">Hadley further refined</a> the original reprex by removing the <code>mutate()</code>, <code>group_by()</code>, and data frame from the example to show that the problem was directly related to an unexpected amount of overhead in <code>case_when()</code>. Creating minimal reprexes allows us to quickly focus in on the exact problem, resulting in faster PRs, <a href="https://github.com/tidyverse/dplyr/pull/6711">like this one</a>, to resolve them.</p>
<p>If your reprex involves some kind of performance regression, we recommend that you use the <a href="https://bench.r-lib.org/">bench</a> package to include a before and after reprex. This involves installing a version of the package before the regression (with <code>devtools::install_version()</code>), running a reprex that involves a call to <code>bench::mark()</code> which demonstrates the issue, and then rerunning that same reprex with the faulty version of the package installed. Hadley’s <a href="https://github.com/tidyverse/dplyr/issues/6674#issuecomment-1412175315">minimal reprex</a> mentioned above is a great example of this.</p>
</section>
</section>
<section id="new-issues-vs-closed-issues" class="level2">
<h2 class="anchored" data-anchor-id="new-issues-vs-closed-issues">New issues vs closed issues</h2>
<p>If you find that you are having a problem that looks similar to an existing closed issue, we in the tidyteam greatly prefer that you open a new issue rather than commenting on an existing closed one. Some repositories have even set up a GitHub Actions <a href="https://github.com/tidymodels/.github/blob/main/lock.yaml">workflow</a> that locks old issues, preventing this. It is typically much easier for us to keep track of open issues, so the chance of your issue being resolved is much higher if you open a new one with full context, a reprex, and a link to the issue that you believe is related.</p>
</section>
<section id="sec-issue-first-pr-second" class="level2">
<h2 class="anchored" data-anchor-id="sec-issue-first-pr-second">Issue first, PR second</h2>
<p>If you are an <a href="../collaboration/index.html#sec-external-contributions">external contributor</a> to a package and feel that you have found a bug, it is highly recommended that you open an issue <em>first</em> before attempting a PR. This gives the maintainer a chance to confirm that what you are seeing is actually an issue, and that they are willing to accept a PR for it. Importantly, it avoids the tough situation of a PR author spending a bunch of time on a PR only for it to be closed by the reviewer because they didn’t believe it was a bug or didn’t agree with the approach taken by the author.</p>
<p>For existing issues, it is typically still worth adding a comment on the issue asking if the maintainer would accept a PR for it. They might have plans to revamp that section of the codebase entirely, which may invalidate your PR altogether. Even if they say yes, remember that you might not get an immediate review if the maintainer isn’t actively working on the package, as mentioned in the <a href="../collaboration/index.html#sec-external-contributions">patterns of collaboration</a> section, but we still value all contributions!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../author/handling-comments.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Handling reviewer comments</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>