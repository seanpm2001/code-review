<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Tidyverse code review principles - 4&nbsp; Speed of reviews</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../reviewer/comments.html" rel="next">
<link href="../reviewer/navigate.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Speed of reviews</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Tidyverse code review principles</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/DavisVaughan/code-review" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../collaboration/index.html" class="sidebar-item-text sidebar-link">Patterns of collaboration</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../reviewer/index.html" class="sidebar-item-text sidebar-link">How to review a pull request</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/purpose.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">The purpose of code review</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/aspects.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Aspects of a PR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/navigate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Navigating a PR in review</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/speed.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Speed of reviews</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/comments.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Writing review comments</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reviewer/pushback.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Handling pushback</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../author/index.html" class="sidebar-item-text sidebar-link">How to author a pull request</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../author/descriptions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Writing PR descriptions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../author/small.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Small PRs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../author/handling-comments.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Handling reviewer comments</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#why" id="toc-why" class="nav-link active" data-scroll-target="#why"><span class="toc-section-number">4.1</span>  Why should code reviews be fast?</a></li>
  <li><a href="#what-do-we-mean-by-fast" id="toc-what-do-we-mean-by-fast" class="nav-link" data-scroll-target="#what-do-we-mean-by-fast"><span class="toc-section-number">4.2</span>  What do we mean by “fast”?</a></li>
  <li><a href="#sec-interruption" id="toc-sec-interruption" class="nav-link" data-scroll-target="#sec-interruption"><span class="toc-section-number">4.3</span>  Speed vs Interruption</a></li>
  <li><a href="#detailed-review" id="toc-detailed-review" class="nav-link" data-scroll-target="#detailed-review"><span class="toc-section-number">4.4</span>  Detailed review</a></li>
  <li><a href="#sec-cross-time-zone" id="toc-sec-cross-time-zone" class="nav-link" data-scroll-target="#sec-cross-time-zone"><span class="toc-section-number">4.5</span>  Cross time zone reviews</a></li>
  <li><a href="#sec-approve-with-comments" id="toc-sec-approve-with-comments" class="nav-link" data-scroll-target="#sec-approve-with-comments"><span class="toc-section-number">4.6</span>  Approve with comments</a></li>
  <li><a href="#sec-request-changes" id="toc-sec-request-changes" class="nav-link" data-scroll-target="#sec-request-changes"><span class="toc-section-number">4.7</span>  Requesting changes</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/DavisVaughan/code-review/edit/main/reviewer/speed.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/DavisVaughan/code-review/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-speed" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Speed of reviews</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="why" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="why"><span class="header-section-number">4.1</span> Why should code reviews be fast?</h2>
<p>The speed of an individual developer is important, but the speed at which a <em>team</em> of developers can produce high quality code is even more important. When code reviews are slow, several things happen:</p>
<ul>
<li><p><strong>Developers start to protest the code review process.</strong> If a reviewer only responds every few days, but requests major changes to the PR each time, that can be frustrating and difficult for the author. If the reviewer requests the <em>same</em> substantial changes (changes which really do improve code health), but responds <em>quickly</em> every time the author makes an update, the frustration tends to disappear. <strong>Most complaints about the code review process are actually resolved by making the process faster.</strong></p></li>
<li><p><strong>The velocity of the team as a whole is decreased.</strong> Yes, the individual who doesn’t respond quickly to the review gets other work done. However, new features and bug fixes for the rest of the team are delayed by days, weeks, or months as each PR waits for review.</p></li>
<li><p><strong>Code health can be impacted.</strong> When reviews are slow, authors are actually incentivized to submit <em>fewer</em> PRs and to make each one <em>larger</em>. If you think that it is going to take days to get a single small change reviewed, you are going to be pressured to include <em>one more thing</em> in your PR just to avoid another multi-day review process. To ensure that each PR only improves the health of the codebase, code review must be fast enough that authors don’t feel hamstrung by it.</p></li>
</ul>
</section>
<section id="what-do-we-mean-by-fast" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="what-do-we-mean-by-fast"><span class="header-section-number">4.2</span> What do we mean by “fast”?</h2>
<p>Rather than suggesting average turnaround times for a PR review (such as 2-4 hours), we feel that it is more useful to categorize PRs under different <a href="../collaboration/index.html">patterns of collaboration</a>. This recognizes the fact that each PR comes with its own context - a time sensitive bug fix that blocks another colleague is going to be reviewed and merged faster than a small typo in a dormant package that isn’t actively being worked on.</p>
<p>The most important thing is for the author and reviewer to have similar expectations around the amount of time a PR review may take. If there is confusion around this, the author and reviewer should discuss this with each other, especially if they are both Posit employees, to ensure that they are on the same page about which <a href="../collaboration/index.html">pattern</a> their style of collaboration falls under (keeping in mind that the patterns can be modified as needed).</p>
<p>If you are feeling overwhelmed by the amount of PRs that you are in charge of, it is worth reviewing your PR process. If you have so many PRs to review that you can’t get to your own work, then you might need to distribute the reviews across your team more evenly. Not speaking up when you are overwhelmed by PRs can in turn slow down an entire team!</p>
</section>
<section id="sec-interruption" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="sec-interruption"><span class="header-section-number">4.3</span> Speed vs Interruption</h2>
<p>There is one time where the consideration of personal velocity trumps team velocity. <strong>If you are in the middle of a focused task, such as writing code, don’t interrupt yourself to do a code review.</strong> Research has shown that it can take a long time for a developer to get back into a smooth flow of development after being interrupted. So interrupting yourself while coding is actually <em>more</em> expensive to the team than making a PR author wait a bit for a code review. If you want to read more about this, Paul Graham’s post on <a href="http://www.paulgraham.com/makersschedule.html">Maker vs Manager</a> is very good.</p>
<p>Instead, wait for a break point in your work before you respond to a request for review. This could be when your current coding task is completed, after lunch, returning from a meeting, coming back from the breakroom, etc. Most “deep work” sessions last around 2-3 hours, so batching your code reviews and handling multiple of them at once after a focused session often works well.</p>
</section>
<section id="detailed-review" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="detailed-review"><span class="header-section-number">4.4</span> Detailed review</h2>
<p>With all of this discussion about speed, it can be tempting to just do a surface level review and respond with “LGTM.” Resist this temptation! The whole <a href="purpose.html">purpose of code review</a> is to ensure that the code health of the code base is improving, and you are unlikely to catch potential bugs with a surface level review.</p>
<p>PRs vary greatly in their complexity and sufficiently carrying out the review can take a non-trivial amount of time and cognitive effort. In general:</p>
<ul>
<li><p><strong>Small PRs</strong> take anywhere from <strong>5-15 minutes</strong> and don’t typically require checking the code out locally. This should be the majority of code reviews that tackle small bugs or documentation changes. You should typically be able to “run” the code related to these changes in your head.</p></li>
<li><p><strong>Medium PRs</strong> take up to <strong>30 minutes</strong> and often involve using <code>usethis::pr_fetch()</code> and exploring the code locally. This typically includes PRs that implement new features or small UI changes.</p></li>
<li><p><strong>Large PRs</strong> can take up to <strong>1 hour</strong>, and occasionally even longer. These should be very rare, and are reserved for large refactorings, especially if there are unavoidable behavior changes mixed in. Large PRs are typically undesirable because they slow the velocity of the entire team, so typically the reviewer should ask the author if the PR can be <a href="../author/small.html">split into multiple smaller PRs</a>. If you don’t have time to review a large PR and it can’t be made any smaller, provide some broad comments on the design of the PR, and consider requesting another colleague to take a look.</p></li>
</ul>
</section>
<section id="sec-cross-time-zone" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="sec-cross-time-zone"><span class="header-section-number">4.5</span> Cross time zone reviews</h2>
<p>Dealing with time zone differences can be challenging, but when the author and reviewer are <a href="../collaboration/index.html#sec-close-knit-collaboration">working together closely</a> it is reasonable for the reviewer to ensure that they provide feedback before the author starts work the next day. If more rapid turnaround times are needed, then the author should communicate that with the reviewer and attempt to batch multiple PRs in parallel, or set aside a predetermined time during the day when both the author and reviewer are online for review.</p>
</section>
<section id="sec-approve-with-comments" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="sec-approve-with-comments"><span class="header-section-number">4.6</span> Approve with comments</h2>
<p>The most common kind of PR review within the tidyteam group is known as “approved with comments.” It involves leaving a few minor comments on a PR, while also hitting the <code>Approve</code> button on the GitHub review UI:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/approve-with-comments.png" class="img-fluid figure-img" width="600"></p>
</figure>
</div>
<p>This gives the PR author permission to merge the PR as soon as they have addressed the comments without needing to request another round of review. This is done when either:</p>
<ul>
<li>The reviewer is confident that the author will appropriately address all the reviewer’s remaining comments.</li>
<li>The remaining changes are minor and don’t <em>have</em> to be done by the author.</li>
</ul>
<p>Approving with comments is largely about the experience of the PR author. For new authors that are still being onboarded, it is common for reviewers to use the <code>Comment</code> option instead, which is a signal to the author that they should request another round of review when they have finished addressing your comments. It is important to remember to be patient with new developers; they are going to need multiple rounds of detailed reviews early on, but putting in this extra effort up front tends to lead to faster PRs in the future as the author learns more about what is expected from their PRs.</p>
</section>
<section id="sec-request-changes" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="sec-request-changes"><span class="header-section-number">4.7</span> Requesting changes</h2>
<p>GitHub also includes a third option when submitting a review, <code>Request changes</code>. This is typically reserved for more drastic changes that absolutely require another round of review. This option is rare to see in <a href="../collaboration/index.html#sec-close-knit-collaboration">close-knit collaboration</a>, when both the author and reviewer are experts, but is somewhat common when the author is an <a href="../collaboration/index.html#sec-the-understudy">understudy</a> and with <a href="../collaboration/index.html#sec-external-contributions">external contributions</a>, where the author likely doesn’t have as much expertise as the reviewer.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../reviewer/navigate.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Navigating a PR in review</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../reviewer/comments.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Writing review comments</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>